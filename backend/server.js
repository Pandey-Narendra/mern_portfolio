// ======================================================================================================================================================
                                            // Import Required Packages Starts
// =======================================================================================================================================================

    const express = require('express');        // Express is used to build RESTful APIs easily
    const mongoose = require('mongoose');      // Mongoose is used to interact with MongoDB using models and schemas
    const cors = require('cors');              // CORS enables secure cross-origin requests
    require('dotenv').config();                // Loads environment variables from .env file

// ======================================================================================================================================================
                                            // Import Required Packages
// =======================================================================================================================================================


// =======================================================================================================================================================
                                    // Express App 
// =======================================================================================================================================================

    const app = express();                     // Create an Express application

    // =======================================================================================================================================================
                                                                // Middleware Configuration Starts
    // =======================================================================================================================================================

        app.use(cors());                           // Enables CORS (allows frontend to call backend from a different origin)
        app.use(express.json());                   // Parses incoming JSON requests (body-parser for JSON)

    // =======================================================================================================================================================
                                                                // Middleware Configuration Ends
    // =======================================================================================================================================================


    // =======================================================================================================================================================
                                                                // Routing Starts
    // =======================================================================================================================================================

        app.get('/', (req, res) => {
            res.send('API is Running Successfully!');
        });

    // =======================================================================================================================================================
                                                                // Routing Ends
    // =======================================================================================================================================================

// =======================================================================================================================================================
                                        //        MongoDB Connection Starts
// =======================================================================================================================================================

    mongoose.connect(process.env.MONGO_URI)
    .then( () => {
        console.log('Mongoose connected to MongoDB Atlas');
    })
    .catch( (err) => {
        'Mongoose connection error:', err
    } );

    // const db = mongoose.connection;
    // db.on('connected', () => {
    //     console.log('Mongoose connected to MongoDB Atlas');
    // });
    // db.on('error', (err) => {
    //     console.error('Mongoose connection error:', err);
    // });
    // db.on('disconnected', () => {
    //     console.log('Mongoose disconnected');
    // });


// =======================================================================================================================================================
                                        //    MongoDB Connection Ends
// =======================================================================================================================================================



// ======================================================================================================================================================
                                                            // Start the Server
// ======================================================================================================================================================

    const PORT = process.env.PORT || 3000;    

    app.listen(PORT, () => {
        console.log(`Server is running at http://localhost:${PORT}`);
    });

// ======================================================================================================================================================
                                                            // End the Server
// ======================================================================================================================================================